--- 
layout: post
title: NodeKnockout and Activenode.no.de
published: true
---
<p>Last weekend we participated in the community driven 48 hour programming contest called <a href="http://nodeknockout.com/">Node Knockout.</a> The idea is to go from an idea to production in exactly 48 hours using the wonderful <a href="http://nodejs.org/">Node.js</a>. Noders from all over the world compete for the prizes that are awarded based on Innovation, Design, Utility and Completeness</p>
<p>We'd signed up long time ago, but we had no idea what we would be building till the morning 5.30AM( 0:00 GMT). Initially I was thinking of building&nbsp; slick visualization over the <a href="http://www.bitcoin.org">Bitcoin</a> transactions, but because of the limited scope and technical complexity, iI was wary about it. Eventually we decided to build a node.js equivalent the Rails' awesome <a href="http://newrelic.com/">New Relic's RPM</a>. It also looked like something that could be build progressively, and be done quickly.</p>
<p>&nbsp;</p>
<p>Another choice I had to make in the morning was the choice of deployment, We had to choose better the 3 official alternatives</p>
<ol>
<li><a href="http://no.de">Joyent's No.de</a> platform : It's easy to deploy and we get ssh access to the machines, but it uses Solaris and it's weird package manager, that we had very little idea about.</li>
<li><a href="http://www.linode.com">Linode</a>: Very flexible, and we get the choice of OS. But much harder to get the deploys right. We had to script our own, there was good documentation though</li>
<li><a href="http://www.heroku.com">Heroku</a>: The an in between option, good deployment support but lack of ssh access and apps was a turn off.</li>
</ol>
<p>We chose Joyent's No.de which remained our final deployment platform. We briefly switched to Linode, because for the first day of our usage No.de had broken web socket support, so the real time updates to the map was not possible. This issue was fixed the next day and we switched back to no.de for our deployment. It sucked a bit of time away but it was not really that much.</p>
<p>It is currently hosted <a href="http://activenode.no.de/">here</a>.</p>
<p>We used <a href="http://redis.io/">Redis</a> for our storage, and later it turned out that it was a good choice, simpler storage format was a win. We used the <a href="http://redis.io/commands/monitor" target="_blank">Redis's monitor</a> feature to build the <a href="http://activenode.no.de/hosts/activenode.no.de/live_map">live map</a>. We'd pick the new request's Remote host and translate it to the city of origin which was plotted on the map. This gave us an awesome integration with <a href="http://socket.io/">socket.io</a>. I am still at a loss of how we would have implemented it in any other database( couchdb's changes would also work)</p>
<p>We also used the awesome <a href="http://coffeescript.org/">CoffeeScript</a> to write the code, both of us were not CoffeeScript experts, but it was never a cause of any weird issue.</p>
<p>We published a npm module <a href="http://search.npmjs.org/#/activenode-monitor" target="_blank">activenode-monitor</a> (npm modules are equivalent of ruby gems) for usage in the express applications. But since it needed to talk to a central Redis on the no.de machine, which was not accessible from outside the machine(no.de has weird ssh setup) we could not get it to work. It took us a lot of time to realize that we could just use the free Redis plan of <a href="http://www.redistogo.com">redistogo</a>. And it just worked wonderfully well once we integrated it.</p>
<p>We store a lot of interesting client/server information into redis(though we did not get the time to implement views for all of it) and we are filling up the 512K of memory available on the free plan in about a day. So I need to flush out all the data almost every day.</p>
<p>It's an amazing experience to compress so much learning into 48 hrs,  sometimes we were dazed and confused and sometimes in a wonderful flow. Having a usable app at the end of it is definitely a bonus.&nbsp; Right now the judges are rating the final <a href="http://nodeknockout.com/entries">180 entries</a> out of the 302 that started. Some of the feedback we've got is pretty encouraging. We seem to be scoring high on utility and design and low on innovation and completeness. So any chance of our winning or being in the high ranks is unlikely.</p>
<p>I can excuse myself for the completeness, because of a conincidence of <a href="http://devopsdays.org/">devops conference</a> occuring on the same weekend and i had signed up to talk about Devops on Cloud. Finishing the slides, preparing and delivering the session sucked a lot of time out of my Sunday.</p>
<p>All in all it was good fun and a wonderful learning experience. We are looking forward to NodeKnockout 2012.</p>
<p>If you have reached the end of this. Please show us some love by voting for the app <a href="http://nodeknockout.com/teams/activenode">here</a>.</p>
<p>&nbsp;</p>
